apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: teleportaccessmonitoringrulesv1.resources.teleport.dev
spec:
  group: resources.teleport.dev
  names:
    kind: TeleportAccessMonitoringRuleV1
    listKind: TeleportAccessMonitoringRuleV1List
    plural: teleportaccessmonitoringrulesv1
    shortNames:
    - accessmonitoringrulev1
    - accessmonitoringrulesv1
    singular: teleportaccessmonitoringrulev1
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: AccessMonitoringRuleV1 is the Schema for the accessmonitoringrulesv1
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AccessMonitoringRule resource definition v1 from Teleport
            properties:
              automatic_review:
                description: automatic_review defines automatic review configurations
                  for Access Requests. Both notification and automatic_review may
                  be set within the same access_monitoring_rule. If both fields are
                  set, the rule will trigger both notifications and automatic reviews
                  for the same set of access events. Separate plugins may be used
                  if both notifications and automatic_reviews is set.
                nullable: true
                properties:
                  decision:
                    description: decision specifies the proposed state of the access
                      review. This can be either 'APPROVED' or 'DENIED'.
                    type: string
                  integration:
                    description: integration is the name of the integration that is
                      responsible for monitoring the rule. Set this value to `builtin`
                      to monitor the rule with Teleport.
                    type: string
                type: object
              condition:
                description: condition is a predicate expression that operates on
                  the specified subject resources, and determines whether the subject
                  will be moved into desired state.
                type: string
              desired_state:
                description: desired_state defines the desired state of the subject.
                  For Access Request subjects, the desired_state may be set to `reviewed`
                  to indicate that the Access Request should be automatically reviewed.
                type: string
              notification:
                description: notification defines the plugin configuration for notifications
                  if rule is triggered. Both notification and automatic_review may
                  be set within the same access_monitoring_rule. If both fields are
                  set, the rule will trigger both notifications and automatic reviews
                  for the same set of access events. Separate plugins may be used
                  if both notifications and automatic_reviews is set.
                nullable: true
                properties:
                  name:
                    description: name is the name of the plugin to which this configuration
                      should apply.
                    type: string
                  recipients:
                    description: recipients is the list of recipients the plugin should
                      notify.
                    items:
                      type: string
                    nullable: true
                    type: array
                type: object
              schedules:
                description: schedules specifies a map of schedules that can be used
                  to configure the access monitoring rule conditions.
                nullable: true
                properties:
                  key:
                    type: string
                  value:
                    nullable: true
                    properties:
                      time:
                        description: TimeSchedule specifies an in-line schedule.
                        nullable: true
                        properties:
                          shifts:
                            description: Shifts contains a set of shifts that make
                              up the schedule.
                            items:
                              properties:
                                end:
                                  type: string
                                start:
                                  type: string
                                weekday:
                                  type: string
                              type: object
                            nullable: true
                            type: array
                          timezone:
                            description: Timezone specifies the schedule timezone.
                              This field is optional and defaults to "UTC". Accepted
                              values use timezone locations as defined in the IANA
                              Time Zone Database, such as "America/Los_Angeles", "Europe/Lisbon",
                              or "Asia/Singapore".  See https://data.iana.org/time-zones/tzdb/zone1970.tab
                              for a list of supported values.
                            type: string
                        type: object
                    type: object
                type: object
              states:
                description: states are the desired state which the monitoring rule
                  is attempting to bring the subjects matching the condition to.
                items:
                  type: string
                nullable: true
                type: array
              subjects:
                description: subjects the rule operates on, can be a resource kind
                  or a particular resource property.
                items:
                  type: string
                nullable: true
                type: array
            type: object
          status:
            description: Status defines the observed state of the Teleport resource
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of an object's state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              teleportResourceID:
                format: int64
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: null
  storedVersions: null
