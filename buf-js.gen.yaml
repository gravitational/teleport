version: v1
plugins:
  # https://github.com/protocolbuffers/protobuf/tree/v3.20.1/js
  - name: js
    strategy: all
    out: gen/proto/js
    opt:
      - import_style=commonjs,binary

  # https://github.com/grpc/grpc-node/tree/grpc-tools%401.12.4/packages/grpc-tools/
  - name: grpc
    strategy: all
    out: gen/proto/js
    opt: grpc_js
    path: grpc_tools_node_protoc_plugin

  # https://github.com/agreatfool/grpc_tools_node_protoc_ts/tree/v5.3.2
  - name: ts
    strategy: all
    out: gen/proto/js
    path:
      - npm
      - exec
      - --yes
      - --package=grpc_tools_node_protoc_ts@5.3.2
      - --
      - protoc-gen-ts
    opt: "service=grpc-node"
