---
title: Teleport's integration with Slack
description: This guide explains how to setup a Slack plugin for Teleport for privilege elevation approvals.
h1: Teleport Slack Plugin Setup
---

This guide will explain how to set up Teleport with Slack. Teleport's Slack
integration notifies individuals and channels of access requests.

<Notice
  type="danger"
  scope="oss"
>

  This guide requires Teleport Cloud or Teleport Enterprise. The open source
  edition of Teleport only supports [GitHub](../../setup/admin/github-sso.mdx)
  as an SSO provider.

</Notice>

Here is an example of sending an access request via Teleport's Slack plugin:

<video controls>
  <source
    src="../../../img/enterprise/plugins/slack/slack.mp4"
    type="video/mp4"
  />

  <source
    src="../../../img/enterprise/plugins/slack/slack.webm"
    type="video/webm"
  />

  Your browser does not support the video tag.
</video>

## Prerequisites

- Slack admin privileges to create an app and install it to your workspace

(!/docs/pages/includes/commercial-prereqs-tabs.mdx!)

(!/docs/pages/includes/tctl.mdx!)

## Step 1/7. Install the Teleport Slack plugin

We currently only provide `linux-amd64` binaries. You can also compile these plugins
from source.

<Notice scope={["enterprise"]} type="tip">
We recommend installing Teleport plugins on the same host as the Teleport
Proxy Service. This is an ideal location as plugins have a low memory footprint
and will require access to both the public internet and the Teleport Auth Service.
</Notice>

<Tabs>
<TabItem label="Download">
  ```code
  $ curl -L -O https://get.gravitational.com/teleport-access-slack-v(=teleport.version=)-linux-amd64-bin.tar.gz
  $ tar -xzf teleport-access-slack-v(=teleport.version=)-linux-amd64-bin.tar.gz
  $ ./teleport-access-slack/install
  ```
</TabItem>
<TabItem label="From Source">
  To install from source you need `git` and `go >= (=teleport.golang=)` installed.

  ```code
  # Check out the teleport-plugins repository
  $ git clone https://github.com/gravitational/teleport-plugins.git
  $ cd teleport-plugins/access/slack
  $ make
  ```
  Place `./teleport-access-slack/teleport-slack` into an appropriate location within the sytem's PATH, e.g.`/usr/local/bin`.
  ```code
  mv ./teleport-access-slack/teleport-slack /usr/local/bin
  ```
</TabItem>
</Tabs>

## Step 2/7. Create a user and role for the plugin

(!docs/pages/includes/plugins/rbac.mdx!)

## Step 3/7. Export the access plugin identity

(!docs/pages/includes/plugins/identity-export.mdx!)

Place any files generated by this command into `/var/lib/teleport/plugins/slack` for later reference when configuring the plugin.

```code
# create a data directory to hold certificate files for the plugin.
$ sudo mkdir -p /var/lib/teleport/plugins/slack
$ sudo mv auth.* /var/lib/teleport/plugins/slack
```

## Step 4/7. Create a Slack app

You'll need to:

1. Create a new app, pick a name, and select a workspace it belongs to.
2. Add an OAuth Scope, which is required by Slack for the app to be installed.
3. Obtain an OAuth token.

We'll create a new Slack app and set up auth tokens and callback URLs so that
Slack knows how to notify the Teleport plugin when "Approve" or "Deny" buttons are
clicked.

Visit [https://api.slack.com/apps](https://api.slack.com/apps) to create a new Slack App.

**App Name:** Teleport<br/>
**Development Slack Workspace:** Pick the workspace you'd like the requests to show up in. <br/>
**App Icon:** <a href="../../../img/enterprise/plugins/teleport_bot@2x.png" download>Download Teleport Bot Icon</a>

![Create Slack App](../../../img/enterprise/plugins/slack/Create-a-Slack-App.png)

### Select OAuth scopes

On the App screen, go to “OAuth and Permissions” under Features in the sidebar menu. Then scroll to Scopes, and add `chat:write, incoming-webhook, users:read, users:read.email` scopes so that our plugin can post messages to your Slack channels.

![API Scopes](../../../img/enterprise/plugins/slack/api-scopes.png)

### Obtain an OAuth token

![OAuth Tokens](../../../img/enterprise/plugins/slack/OAuth.png)

### Add to workspace

![OAuth Tokens](../../../img/enterprise/plugins/slack/Slackbot-Permissions.png)
After adding to the workspace, you still need to invite the bot to the channel. Do this by using the @ command,
and inviting them to the channel.
![Invite bot to channel](../../../img/enterprise/plugins/slack/invite-user-to-team.png)

## Step 5/7. Configure the Teleport Slack Plugin

### Generate a config file

The Teleport Slack plugin uses a config file in TOML format. Generate a boilerplate config by
running the following command and place it in the `/etc` directory where it can be
read by the plugin.

```code
$ teleport-slack configure > teleport-slack.toml
$ sudo mv teleport-slack.toml /etc
```

This should result in a config file like the one below.

```toml
(!examples/resources/plugins/teleport-slack.toml!)
```

### Edit the config file

Edit the following fields in the configuration file you generated with values specific to your Teleport and Slack app instances.

**`[teleport]`**

This section is used to connect to your Teleport Auth Server.

<Tabs>
  <TabItem label="Self-Hosted" scope={["oss","enterprise"]}>
    
Set `addr` to your Auth Server address. This address must be reachable from the Teleport Slack Plugin.

Set `client_key`, `client_crt`, and `root_cas` to the identity files
generated in the [export identity](#step-37-export-the-access-plugin-identity) section.

```toml
[teleport]
addr = "localhost:3025"
client_key = "/var/lib/teleport/plugins/slack/auth.key" # Teleport GRPC client secret key
client_crt = "/var/lib/teleport/plugins/slack/auth.crt" # Teleport GRPC client certificate
root_cas = "/var/lib/teleport/plugins/slack/auth.cas"   # Teleport cluster CA certs
```
</TabItem>
  <TabItem label="Cloud" scope={["cloud"]}>

Set `addr` to  your Teleport Cloud tenant address.

Set `identity` to the identity file generated in the [export identity](#step-37-export-the-access-plugin-identity) section.

```toml
[teleport]
addr = "mytenant.teleport.sh"
identity = "/var/lib/teleport/plugins/slack/auth.pem"
```
  </TabItem>
</Tabs>
 
**`[slack]`**

`token`: set this to the token found in the [Obtain an OAuth Token](#obtain-an-oauth-token) section.

**`[role_to_recipients]`**

Provide a mapping of Teleport roles to Slack recipients based on your desired
functionality.

For example:

```toml
[role_to_recipients]
"*" = "admin-slack-channel"
"dev" = ["dev-slack-channel", "admin-slack-channel"]
"alex" = "alex@gmail.com"
```

If a user requests the `dev` role, the plugin will send a message to both the `dev-slack-channel`
and `admin-slack-channel`. If a user requests the `alex` role, the Slack user with the username
`alex@gmail.com`, if one exists, will recieve a DM. If any other role is requested, the plugin will
follow the `*` entry and send a message to the `admin-slack-channel`.

## Step 6/7. Test your Slack app

Assuming that Teleport is running, you've created the Slack app, and the plugin is
configured, you can now run the plugin and test the workflow!

```code
$ teleport-slack start
```

If everything works fine, the log output should look like this:

```code
$ teleport-slack start
INFO   Starting Teleport Access Slack Plugin 7.2.1: slack/app.go:80
INFO   Plugin is ready slack/app.go:101
```

Create an access request and check if the plugin works as expected with the
following steps.

### Create an access request

<Tabs>
<TabItem label="As admin">
  A Teleport admin can create an access request for another user with `tctl`.
  ```code
  # Replace USERNAME with a Teleport local user and TARGET_ROLE with a Teleport Role
  $ tctl request create USERNAME --roles=TARGET_ROLE
  ```
</TabItem>
<TabItem label="As user">
  Users can use `tsh` to create an access request and log in with approved roles.
  ```code
  # Replace TARGET_ROLE with a Teleport role
  $ tsh request new --roles=TARGET_ROLE
  Seeking request approval... (id: 8f77d2d1-2bbf-4031-a300-58926237a807)
  ```
</TabItem>
</Tabs>

The configured Slack recipients should receive a new message for the new pending request.

### Resolve the request

<Tabs>
<TabItem label="As admin">
  ```code
  # Replace REQUEST_ID with the id of the request
  $ tctl request approve REQUEST_ID
  $ tctl request deny REQUEST_ID
  ```
</TabItem>
<TabItem label="As user">
  ```code
  # Replace REQUEST_ID with the id of the request
  $ tsh request review --approve REQUEST_ID
  $ tsh request review --deny REQUEST_ID
  ```
</TabItem>
</Tabs>

Once the request is resolved, the Slack bot will make an emoji reaction of ✅ or
❌ on the Slack message for the access request, depending on whether the request
was approved or denied.

## Step 7/7. Set up systemd

In production, we recommend starting the Teleport plugin daemon via an init system like systemd.
Here's the recommended Teleport plugin service unit file for systemd:

```ini
(!examples/systemd/plugins/teleport-slack.service!)
```

Save this as `teleport-slack.service`.

## Audit log

The plugin will let anyone with access to the Slack channel approve access
requests, so it's important to review the Teleport audit log to ensure that only
the expected users are submitting reviews.

When auditing access request reviews, check for events with the type
`Access Request Reviewed` in the Teleport Web UI 
<ScopedBlock scope={["oss", "enterprise"]}>and `access_request.review` if reviewing the audit log on the Auth Service host</ScopedBlock>.

## Feedback

If you have any issues with this plugin, please create a GitHub issue in our [`gravitational/teleport-plugins`](https://github.com/gravitational/teleport-plugins/issues/new) repo.
