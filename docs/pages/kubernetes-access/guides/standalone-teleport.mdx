---
title: Kubernetes Access from standalone Teleport
description: Connecting standalone Teleport installations to Kubernetes clusters
---

## Standalone Teleport installation

Teleport can connect to external Kubernetes clusters without using the Teleport
Helm chart or running a pod inside of the Kubernetes cluster. To do this,
Teleport needs a `kubeconfig` file to authenticate against the Kubernetes API.

## Generating `kubeconfig`

First, configure your local `kubectl` command to point at the Kubernetes
cluster you want to register. You can use `kubectl config get-contexts` to
verify that the correct cluster is selected, or `kubectl config use-context
${CONTEXT_NAME?}` to switch to cluster `CONTEXT_NAME`.

Next, use
[get-kubeconfig.sh](https://github.com/gravitational/teleport/blob/master/examples/k8s-auth/get-kubeconfig.sh)
to create a long-lived `kubeconfig` for Teleport to use.

You can connect multiple Kubernetes clusters to Teleport from one `kubeconfig`,
if it contains multiple entries. Use
[merge-kubeconfigs.sh](https://github.com/gravitational/teleport/blob/master/examples/k8s-auth/merge-kubeconfigs.sh)
to combine multiple `kubeconfigs` generated by `get-kubeconfig.sh`.

## Adding `kubeconfig` to Teleport

In your Teleport Proxy or a new separate instace, add the following to
`teleport.yaml`:

```yaml
# ...
proxy_service:
  # ...
  public_addr: proxy.example.com:3080

  kube_listen_addr: 0.0.0.0:3026
  # optional: set a different public address for kubernetes access
  kube_public_addr: kube.example.com:3027

kubernetes_service:
  enabled: yes
  listen_addr: 0.0.0.0:3027
  # replace this path with the actual path for your generated kubeconfig
  kubeconfig_file: "path/to/kubeconfig"
```

After Teleport starts with the above config, you should be able to see all new
clusters in `tsh kube ls` or `tctl get kube_service`.
