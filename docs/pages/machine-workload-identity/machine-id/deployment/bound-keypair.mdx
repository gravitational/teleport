---
title: Deploying Machine ID on Bare-metal with Bound Keypair
description: "How to install and configure Machine ID on a bare-metal server with Bound Keypair joining"
---

In this guide, you will install Machine ID's agent, `tbot`, on an arbitrary
node. This includes bare-metal machines, VMs, containers, or other hosts with
persistent storage.

Note that this is a generic join method. A platform-specific join method may be
available that is better suited to your environment; refer to the
[deployment guides](./deployment.mdx) for a full list of options.

## How it works

With Bound Keypair joining, instead of using a static token or relying solely on
renewable certificates, Machine ID bots generate a unique keypair. Teleport is
then configured to trust this public key.

Later, when the bot attempts to join the cluster, Teleport issues it a challenge
that can only be completed using its private key. The bot returns the solved
challenge, attesting to its own identity, and is conditionally allowed to join
the cluster.

As self attestation is inherently less secure than the external verification
that would be provided by a cloud provider like AWS or a dedicated TPM, bound
keypair joining enforces a number of additional checks to prevent abuse,
including:
- Join state verification to ensure the keypair cannot be usefully shared or
  duplicated
- Certificate generation counter checks to ensure regular bot certificates
  cannot be usefully shared or duplicated
- Configurable limits on how often - if at all - bots may be allowed to recover
  using this keypair.

Refer to the [admin guide][guide] for further details on how this join method
works.

## Prerequisites

{/* note: consider edition-prereqs-tabs.mdx include for v19; it is misleading due to the minor launch release */}

- A running Teleport cluster version 18.1.0 or above.
- The `tsh` and `tctl` clients
- (!docs/pages/includes/tctl.mdx!)
- This guide assumes the bot node has mutable persistent storage for internal
  bot data. While it is possible to use Bound Keypair joining can on immutable
  hosts (like CI runs), doing so will reduce security guarantees; see the
  [admin guide][guide] for further information.

## Step 1/5. Install `tbot`

**This step is completed on the Azure VM.**

First, `tbot` needs to be installed on the node that you wish to use Machine ID
on.

Download and install the appropriate Teleport package for your platform:

(!docs/pages/includes/install-linux.mdx!)

## Step 2/5. Create a Bot

**This step is completed on your local machine.**

(!docs/pages/includes/machine-id/create-a-bot.mdx!)

## Step 3/5. Create a join token

**This step is completed on your local machine.**

Create `bot-token.yaml`:

```yaml
kind: token
version: v2
metadata:
  # name will be specified in the `tbot` to use this token
  name: example-bot
spec:
  roles: [Bot]
  # bot_name should match the name of the bot created earlier in this guide.
  bot_name: example
  join_method: bound_keypair
```

Replace:
- `example` with the name of the bot you created in the second step

Use `tctl` to apply this file:

```code
$ tctl create -f bot-token.yaml
```

## Step 4/5. Configure `tbot`

**This step is completed on the bot node.**

Create `/etc/tbot.yaml`:

```yaml
version: v2
proxy_server: example.teleport.sh:443
onboarding:
  join_method: bound_keypair
  token: example-bot
  bound_keypair:
    registration_secret: <secret>
storage:
  type: memory
# outputs will be filled in during the completion of an access guide.
outputs: []
```

(!docs/pages/includes/machine-id/daemon-or-oneshot.mdx!)

## Step 5/5. Configure outputs

(!docs/pages/includes/machine-id/configure-outputs.mdx!)

## Next steps

- Read the [Bound Keypair Joining Reference andÂ Admin Guide][guide]
  for more details about the join method and the available configuration options.
- Follow the [access guides](../access-guides/access-guides.mdx) to finish configuring `tbot` for
  your environment.
- Read the [configuration reference](../../../reference/machine-id/configuration.mdx) to explore
  all the available configuration options.
- [More information about `TELEPORT_ANONYMOUS_TELEMETRY`.](../../../reference/machine-id/telemetry.mdx)

[guide]: ../../../reference/machine-id/bound-keypair.mdx
