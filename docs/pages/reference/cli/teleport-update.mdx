---
title: teleport-update CLI reference
description: Comprehensive reference of subcommands, flags, and arguments for the teleport-update CLI tool.
---

`teleport-update` is a CLI tool that is used to update Teleport agents installed on Linux servers.

See [Teleport Agent Managed Updates](../upgrading/agent-managed-updates.mdx) for more details.

The primary commands for `teleport-update` are as follows:

| Command                          | Description                                                                            |
|----------------------------------|----------------------------------------------------------------------------------------|
| `teleport-update help`           | Output guidance for using commands with `teleport-update`.                             |
| `teleport-update version`        | Output the current version of the `teleport-update` binary.                            |
| `teleport-update enable`         | Install the version of Teleport advertised by the cluster and enable managed updates.  |
| `teleport-update pin`            | Install the version of Teleport advertised by the cluster and stay on that version.    |
| `teleport-update disable`        | Disable auto-updates without removing Teleport. Disables all requests.                 |
| `teleport-update unpin`          | Allow the installed version of Teleport to be updated, if managed updates are enabled. |                                                                              |
| `teleport-update update`         | Update Teleport to the version advertised by the cluster.                              |                                                                              |
| `teleport-update link-package`   | Restore the system-packaged (apt/yum) version of Teleport to /usr/local/bin.           |                                                                              |
| `teleport-update unlink-package` | Remove the system-packaged (apt/yum) version of Teleport from /usr/local/bin.          |                                                                              |
| `teleport-update status`         | Output the status of the installed version of Teleport.                                |                                                                              |
| `teleport-update uninstall`      | Remove both Teleport and the updater.                                                  |                                                                              |

## teleport-update enable

Initializes a certificate destination directory for access from a separate bot
user. Allows for certificates to be written to disks other than a Machine ID
client, configuring either file or POSIX ACL permissions.

Note that most use cases should instead use tbot's runtime ACL management by
specifying allowed reader users and groups in the
[destination configuration](../machine-id/configuration.mdx#directory).

### Flags

| Flag                | Description                                                                                                            |
|---------------------|------------------------------------------------------------------------------------------------------------------------|
| `-d/--debug`        | Enable verbose logging to stderr.                                                                                      |
| `-c/--config`       | Path to a Machine ID configuration file.                                                                               |
| `--destination-dir` | Directory to write short-lived machine certificates to.                                                                |
| `--owner`           | Defines the Linux `user:group` owner of `--destination-dir`. Defaults to the Linux user running `tbot` if unspecified. |
| `--bot-user`        | Enables POSIX ACLs and defines the Linux user that can read/write short-lived certificates to `--destination-dir`.     |
| `--reader-user`     | Enables POSIX ACLs and defines the Linux user that will read short-lived certificates from `--destination-dir`.        |
| `--init-dir`        | If using a config file and multiple destinations are configured, controls which destination dir to configure.          |
| `--clean`           | If set, remove unexpected files and directories from the destination.                                                  |
| `--log-format`      | Controls the format of output logs. Can be `json` or `text`. Defaults to `text`.                                       |

### Examples

**Example using file permissions.**

The following command highlights how to set permissions with `tbot` through Linux groups, using the user and group
`jenkins:jenkins`.
If running `tbot` as the Linux user `root`, use the following invocation of
`tbot init` to initialize the short-lived certificate directory
`/opt/machine-id` with owner `jenkins:jenkins`.

```code
$ tbot init \
    --destination-dir=/opt/machine-id \
    --owner=jenkins:jenkins
```

**Example using POSIX ACLs.**

If running `tbot` as the Linux user `teleport`, use the following invocation of
`tbot init` to initialize the short-lived certificate directory
`/opt/machine-id` with owner `teleport:teleport` but allow `jenkins` to read
from `/opt/machine-id`.

```code
$ tbot init \
    --destination-dir=/opt/machine-id \
    --bot-user=teleport \
    --reader-user=jenkins
```

