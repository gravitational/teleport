---
title: Connect an Amazon Bedrock AgentCore Gateway to Teleport
sidebar_label: Amazon Bedrock AgentCore Gateway
description: Set up an Amazon Bedrock AgentCore Gateway for access through Teleport
tags:
- how-to
- mcp
- zero-trust
---

(!docs/pages/includes/mcp-access/integration-intro.mdx serviceName="Amazon Bedrock AgentCore Gateway" !)

## How it works

The Amazon Bedrock AgentCore Gateway is configured to trust Teleport as its
inbound identity provider. Teleport authenticates client requests and proxies
them to the AgentCore Gateway, which then forwards the requests to the target
MCP servers.

## Prerequisites

(!docs/pages/includes/edition-prereqs-tabs.mdx edition="Teleport (v18.7.0 or higher)" clients="\`tsh\` client"!)
- Ability to configure your Amazon Bedrock AgentCore Gateway
- An agent running the Teleport Application Service. If you have not yet done
  this, follow the [Getting Started guide](../getting-started.mdx).
- A Teleport user with sufficient permissions (e.g. role `mcp-user`) to access
  MCP servers.

## Step 1/2. Configure Amazon Bedrock AgentCore Gateway

To change **Inbound Auth Configurations** of your Amazon Bedrock AgentCore
gateway, go to your gateway in AWS Management Console. Click the **Edit** button
in the *Inbound Identity** section.

Select **Use JSON Web Tokens (JWT)** as the **Inbound Auth type** and select
**Use existing Identity provider configurations** for **JWT schema
configuration**. Note that creating a new gateway may be required if they cannot
be modified after gateway creation.

Use the following as **Discovery URL**:
```code
https://<Var name="teleport.example.com" />/.well-known/openid-configuration
```
Replace <Var name="teleport.example.com"/> with your Teleport cluster name.

Use the following for **Allowed audiences** under **JWT Authorization Configuration**:
```code
mcp+<Var name="https://your-mcp-gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp" />
```
Replace <Var name="https://your-mcp-gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp" />
with your Gateway resource URL, which is available after the gateway is created.
Note that this value is also the application URI you will use to create the
Teleport application.

All other settings under **JWT Authorization Configuration** like **Allowed
clients** should not be selected.

![Gateway Inbound Identity](../../../../img/mcp-access/aws-bedrock-gateway-inbound-identity.png)

## Step 2/2. Connect via Teleport

You can register an MCP application in Teleport by defining it in your Teleport
Application Service configuration, or by using dynamic registration with `tctl`
or Terraform:

<Tabs>
<TabItem label="Static configuration">
```yaml
app_service:
  enabled: "yes"
  apps:
  - name: "bedrock-mcp"
    uri: "mcp+<Var name="https://your-mcp-gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp"/>"
    labels:
      env: dev
      service: "bedrock"
    rewrite:
      headers:
      - "Authorization: Bearer {{internal.id_token}}"
```

Restart the Application Service.
</TabItem>

<TabItem label="tctl">
Create an `app` resource definition file named `app-bedrock-mcp.yaml`:
```yaml
# app-bedrock-mcp.yaml
kind: app
version: v3
metadata:
  name: "bedrock-mcp"
  labels:
    env: dev
    service: "bedrock"
spec:
  uri: "mcp+<Var name="https://your-mcp-gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp"/>"
  rewrite:
    headers:
    - name: "Authorization"
      value: "Bearer {{internal.id_token}}"
```

Create the `app` resource with:
```code
$ tctl create -f app-bedrock-app.yaml
```
</TabItem>

<TabItem label="Terraform">
Create a `teleport_app` resource in terraform:
```hcl
resource "teleport_app" "bedrock" {
  version = "v3"
  metadata = {
    name = "bedrock-mcp"
    labels = {
      "teleport.dev/origin" = "dynamic"
      "env"                 = "dev"
      "service"             = "bedrock"
    }
  }

  spec = {
    uri = "mcp+<Var name="https://your-mcp-gateway.bedrock-agentcore.us-east-1.amazonaws.com/mcp"/>"
    rewrite = {
      headers = [{
        name  = "Authorization"
        value = "Bearer {{internal.id_token}}"
      }]
    }
  }
}
```
Apply the configuration:
```code
$ terraform apply
```
</TabItem>

</Tabs>

(!docs/pages/includes/mcp-access/integration-limit-tools.mdx!)
```yaml
kind: role
version: v8
metadata:
  name: bedrock-mcp-readonly
spec:
  allow:
    app_labels:
      'service': 'bedrock'
    mcp:
      # Adjust this list based on the MCP tools exposed by the gatewayâ€™s targets.
      tools:
      - ^(get|query|list|search|find)_.*$
```

(!docs/pages/includes/mcp-access/integration-tsh.mdx service="bedrock" serviceName="Amazon Bedrock AgentCore Gateway" !)

## Next steps

- Review [Enroll a Streamable-HTTP MCP Server](../enrolling-mcp-servers/streamable-http.mdx).
- See the [dynamic registration](../dynamic-registration.mdx) guide.
- Learn more about [Egress JWT Authentication](../jwt.mdx).
- Connect your [MCP clients](../../../connect-your-client/model-context-protocol/mcp-access.mdx).
