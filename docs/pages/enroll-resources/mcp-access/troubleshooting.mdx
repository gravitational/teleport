---
title: MCP Access Troubleshooting
description: Describes common issues and solutions for access to MCP servers protected by Teleport.
---

This section describes common issues that you might encounter in managing access
to MCP servers with Teleport and how to work around or resolve them.

## No tools available from the MCP server

By default, no MCP tools are allowed by your Teleport roles.

If a user is assigned the `access` preset role, by default the available MCP
tools are controlled by the `{{internal.mcp_tools}}` source in the role
definition. This value can be populated through user traits:

```yaml
kind: role
metadata:
  name: access
spec:
  allow:
    mcp:
      tools:
      - "{{internal.mcp_tools}}"
```

Alternatively you can define a custom role that explicitly specifies the allowed
MCP tools and assigns them to users. See [RBAC](./rbac.mdx) for more details.

## I often see "disconnected" error from my AI tool

Your MCP connection to Teleport backend may be interrupted due to network issues
or expired `tsh` session.

`tsh mcp config` and `tsh mcp connect` provide a `--auto-reconnect` flag that
allows `tsh` to automatically starts a new remote MCP session when the previous
remote session is interrupted. Use `--auto-reconnect` for better user experience
if your MCP sessions are stateless across requests.
