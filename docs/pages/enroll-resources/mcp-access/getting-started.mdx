---
title: MCP Access Getting Started Guide
description: Getting started with Teleport MCP access.
---

Teleportâ€™s MCP access allows users to securely access remote MCP servers,
control which tools are available based on roles, and audit all activity through
the Teleport log.

This guides shows you how to:

- Enroll a MCP server in your Teleport cluster.
- Connect to the MCP server via Teleport.

## How it works

![How it works](../../../img/mcp-access/architecture.png)

Users can configure their AI tools such as Claude Desktop to start an MCP
server using `tsh`. Once successfully authorized, a session is initiated by
`tsh` with the Teleport Application Service.

The Application Service starts the MCP server using the command and arguments
defined by Teleport administrators in the app definition. Teleport then proxies
the connection between the client and the remote MCP server, applying additional
role-based access controls such as filtering which tools are available to the
user.

## Prerequisites

(!docs/pages/includes/edition-prereqs-tabs.mdx!)
- A host, e.g., an EC2 instance, where you will run the Teleport Applications
  Service.
- Tools on the same host that can launch stdio-based MCP servers like `npx`
  or `docker`.

## Step 1/3. Configure the Teleport Application Service

### Get a join token
(!docs/pages/includes/tctl-token.mdx serviceName="Application" tokenType="app" tokenFile="/tmp/token"!)

(!docs/pages/includes/database-access/alternative-methods-join.mdx!)

### Install the Teleport Application Service
Install Teleport on the host where you will run the Teleport Application Service:

(!docs/pages/includes/install-linux.mdx!)

### Configure the Teleport Application service

On the host where you will run the Teleport Application Service, create a file
at `/etc/teleport.yaml` with the following content:
```yaml
version: v3
teleport:
  join_params:
    token_name: "/tmp/token"
    method: token
  proxy_server: "<Var name="PROXY_ADDR" />"
auth_service:
  enabled: false
proxy_service:
  enabled: false
ssh_service:
  enabled: false
app_service:
  enabled: true
  apps:
  - name: "everything"
    labels:
      env: dev
    description:
    mcp:
      # Command to launch stdio-based MCP servers.
      command: "docker"
      # Args to execute with the command.
      args: ["run", "-i", "--rm", "mcp/everything"]
      # Name of the host user account under which the command will be
      # executed. Required for stdio-based MCP servers.
      run_as_host_user: "docker"
```

Replace <Var name="PROXY_ADDR" /> with the host and port of your Teleport Proxy
Service or Teleport Cloud tenant, e.g., `example.teleport.sh:443`.

### Start the Teleport Application Service

(!docs/pages/includes/start-teleport.mdx service="the Application Service"!)

## Step 2/3. Create a user and role

Create a role that will allow a user to connect to MCP servers with label
`env=dev` and allow the user to use the `echo` tool or any tool starts with
`get`:

```code
$ tctl create <<EOF
kind: role
version: v8
metadata:
  name: access-mcp
spec:
  allow:
    app_labels:
      'env': 'dev'
    description: "Example everything MCP server"
    mcp:
      tools:
      - echo
      - get*
EOF
```

(!docs/pages/includes/create-role-using-web.mdx!)

Create the Teleport user assigned the `access-mcp` role we've just created:

```code
$ tctl users add --roles=access-mcp ai_user
```

## Step 3/3. Connect

Log in to Teleport with the user we've just created.

<Tabs>
<TabItem scope={["oss", "enterprise"]} label="Self-Hosted">

```code
$ tsh login --proxy=<Var name="teleport.example.com" /> --user=<Var name="ai_user" />
```

</TabItem>
<TabItem scope={["cloud"]} label="Teleport Enterprise Cloud">

```code
$ tsh login --proxy=<Var name="mytenant.teleport.sh" /> --user=<Var name="ai_user" />
```

</TabItem>
</Tabs>

Now we can inspect available MCP servers:

```code
$ tsh mcp ls
Name       Description                   Type  Labels
---------- ----------------------------- ----- ----------
everything Example everything MCP server stdio env=dev
```

To show configurations for your AI tool to connect:

```code
$ tsh mcp config --all
Found MCP servers:
everything

Here is a sample JSON configuration for launching Teleport MCP servers:
{
  "mcpServers": {
    "teleport-mcp-everything": {
      "command": "/path/to/tsh",
      "args": ["mcp", "connect", "everything"]
    }
  }
}

Tip: use --client-config=claude to update your Claude Desktop configuration.
You can also specify a custom config path with --client-config=<path> to update
a config file compatible with the "mcpServer" mapping.
```

Once your AI tool configuration is updated, you will see
`teleport-mcp-everything` MCP server with allowed tools appear in your AI tool.


## Next Steps

Learn more about protecting MCP servers with Teleport in the following topics:

- [MCP Access Control](rbac.mdx).
- Configuration and CLI [reference](../../reference/agent-services/mcp-access.mdx).
- Audit events [reference](../../reference/monitoring/audit.mdx#event-types)name.