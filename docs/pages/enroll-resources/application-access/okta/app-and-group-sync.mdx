---
title: Okta apps and groups sync
description: Details on Okta integration apps and groups synchronization as Teleport Access Lists
---

Okta has its own permissions system that doesn't directly map into Teleport. This
includes permissions granted by Okta groups along with the assignment of users to individual
applications within Okta. To model this within Teleport, an administrator would typically need
to carefully craft a labeling system to attach to various Okta apps and groups and a set of
roles to go along with them.

With the synchronization of Okta apps and groups ass Teleport Access List feature in the Okta
integration, this work is performed for you. We'll discuss the details of how this works.

## Enrollment

To enroll the Okta apps and groups sync follow the instructions of *Level 1. SSO*, *Level 2. SCIM*
(optional), *Level 3. User sync* and *Level 4. App and Group sync* enrollment in the [Okta
integration setup guide](./integration-enrollment.mdx).

## Synchronizing Access Lists from Okta groups and applications

The Okta Access List synchronizer will look for any Okta group with members or any Okta application
with individual assignments that matches configurable filters that you can optionally supply during
Okta integration enrollment. Access Lists will not be created for groups or applications without
any assignments.

The synchronizer will create the following resources for each matched Okta group or application:

- A role for members that grants access to the group/application.
- A role for owners that grants the ability to review access to the group/application.
- An Access List representing membership to the group/application.
- Members for the Access List.

It should be noted that the Access List sync waits until the Okta groups and Okta applications
has finished syncing as Teleport resources, so it may not start synchronizing immediately on startup.

## Handling nested Access Lists

### Synchronization from Teleport to Okta

Teleport supports nested Access Lists, where an Access List can include other Access Lists as members,
creating a hierarchical structure. However, Okta does not support nested groups.
To accommodate this limitation, the synchronizer flattens nested Access Lists when synchronizing from Teleport to Okta.

Members in Access Lists, from all levels of nesting, are aggregated into a single, flat list of members when
synchronized to Okta. This ensures that all users who should have access according to the Teleport hierarchy
are included in the corresponding Okta group or application.

**Example**:
  - **Teleport Structure**:
    - **Access List A**:
      - Members: User1
      - Nested Members: Access List B
    - **Access List B**:
      - Members: User2, User3
  - **Okta Representation**:
    - Group/Application for Access List A:
      - Members: User1, User2, User3

By flattening the Teleport hierarchy, all users receive the permissions associated with the root-level Access List in Okta.

### Synchronization from Okta to Teleport

When synchronizing from Okta to Teleport, the synchronizer handles the flattened structure from Okta
by attempting to map it back to the Teleport hierarchy:

- **Comparing with Teleport Hierarchy**: The flattened list of members from Okta is compared against the existing
Access List hierarchy in Teleport.
- **Adding New Members**:
  - **New Users**: If there are new users added in Okta that are not present in the Teleport Identity Governance Access List hierarchy,
    these users are added as members at the root-level Access List in Teleport.
  - **Maintaining Hierarchy**: This approach maintains the hierarchical structure within Teleport while ensuring
    that access changes made in Okta are reflected appropriately.
- **Example**:
  - **Okta Group/Application for Access List A**:
    - Members: User1, User2, User3, User4 (User4 is a new member added in Okta)
  - **Teleport Update**:
    - **Access List A**:
      - Members: User1, User4
      - Nested Members: Access List B
    - **Access List B**:
      - Members: User2, User3

### Deletion of Access Lists

Access Lists synchronized from Okta will automatically be deleted when there are no members assigned to them in
Okta or when they are deleted in Okta.

<Admonition type="warning">
It is possible for an administrator to delete Access Lists, but this should only be done once
the Okta integration has been removed and/or Access List synchronization is disabled. This could
remove all users from the Okta group or application that's being targeted!
</Admonition>

## Working with synchronized Access Lists

When first synchronizing an Access List, the owners of the Access List will be set to the default
owners configured during the initial Okta integration enrollment, and the initial review date will
be set 6 months from the configured date. These fields are modifiable, as well as the owner and
membership requirements. However, you will not be able to change grants, as these belong to the
Okta Access List synchronizer.

The owners of an Okta synchronized Access List will be preserved between runs.

<Admonition type="warning">
Removing members from an Okta synchronized Access List will remove the user from the Okta group
or Okta application in Okta unless there are other assignments that convey the assignment to the
user. In this way, Teleport becomes the source of truth for Okta membership. Please keep this in mind
when adding other automated workflows or integrations into your Okta environment.
</Admonition>
