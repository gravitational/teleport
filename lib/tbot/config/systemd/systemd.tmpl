# Generated by `tbot`
[Unit]
Description={{ .UnitName }} - Teleport Machine & Workload Identity Service
After=network.target

[Service]
Type=simple
User={{ .User }}
Group={{ .Group }}
Restart=always
RestartSec=5
Environment="TELEPORT_ANONYMOUS_TELEMETRY={{ if .AnonymousTelemetry }}1{{ else }}0{{ end }}"
ExecStart={{ .TBotPath }} start -c {{ .ConfigPath }}{{ with .DiagSocketForUpdater }} --diag-socket-for-updater={{ . }}{{ end }} --pid-file=/run/{{ .UnitName }}.pid
ExecReload=/bin/kill -HUP $MAINPID
PIDFile=/run/{{ .UnitName }}.pid
LimitNOFILE=524288

[Install]
WantedBy=multi-user.target
