# This file contains definitions for resources required to allow a GitHub
# Actions workflow to enroll with Teleport and connect to allowed Kubernetes
# clusters protected by Teleport.

# To apply this template
#  - Log in to your cluster using `tsh login --proxy=teleport.example.com --user=email@example.com`
#  - Generate a temporary bot using `eval "$(tctl terraform env)"`
#  - Run `terraform init` followed by `terraform plan`
#  - To apply the changes, run `terraform apply`
# Note: Consider contributing the resources below to your Infrastructure as
# Code (IaC) repo (if you have one) instead of executing Terraform locally.

# See the Teleport Terraform Provider docs for more information about using
# Terraform to manage Teleport resources:
# https://goteleport.com/docs/zero-trust-access/infrastructure-as-code/terraform-provider/

{{ template "terraform-provider.tf.tmpl" . }}
# A role defines which Kubernetes clusters can be accessed, and the level of
# access granted. Fine tune the access using the `kubernetes_*` attributes.
# All available options can be found in the Teleport Terraform Provider
# reference:
# https://goteleport.com/docs/reference/infrastructure-as-code/terraform-provider/
{{ .RoleConfig }}
# A bot is a Machine & Workload ID user which is granted access to enrolled
# Kubernetes clusters using the role above.
{{ .BotConfig }}
# A provision token allows a GitHub Actions workflow to enroll with Teleport and
# assume the identity of the bot defined above and its access.
{{ .TokenConfig }}
