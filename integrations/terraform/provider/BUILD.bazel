load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "provider",
    srcs = [
        "credentials.go",
        "data_source_teleport_access_list.go",
        "data_source_teleport_access_monitoring_rule.go",
        "data_source_teleport_app.go",
        "data_source_teleport_auth_preference.go",
        "data_source_teleport_autoupdate_config.go",
        "data_source_teleport_autoupdate_version.go",
        "data_source_teleport_cluster_maintenance_config.go",
        "data_source_teleport_cluster_networking_config.go",
        "data_source_teleport_database.go",
        "data_source_teleport_device_trust.go",
        "data_source_teleport_dynamic_windows_desktop.go",
        "data_source_teleport_github_connector.go",
        "data_source_teleport_health_check_config.go",
        "data_source_teleport_installer.go",
        "data_source_teleport_login_rule.go",
        "data_source_teleport_oidc_connector.go",
        "data_source_teleport_okta_import_rule.go",
        "data_source_teleport_provision_token.go",
        "data_source_teleport_role.go",
        "data_source_teleport_saml_connector.go",
        "data_source_teleport_server.go",
        "data_source_teleport_session_recording_config.go",
        "data_source_teleport_static_host_user.go",
        "data_source_teleport_trusted_cluster.go",
        "data_source_teleport_user.go",
        "data_source_teleport_workload_identity.go",
        "errors.go",
        "id.go",
        "provider.go",
        "resource_teleport_access_list.go",
        "resource_teleport_access_monitoring_rule.go",
        "resource_teleport_app.go",
        "resource_teleport_auth_preference.go",
        "resource_teleport_autoupdate_config.go",
        "resource_teleport_autoupdate_version.go",
        "resource_teleport_bot.go",
        "resource_teleport_cluster_maintenance_config.go",
        "resource_teleport_cluster_networking_config.go",
        "resource_teleport_database.go",
        "resource_teleport_device_trust.go",
        "resource_teleport_dynamic_windows_desktop.go",
        "resource_teleport_github_connector.go",
        "resource_teleport_health_check_config.go",
        "resource_teleport_installer.go",
        "resource_teleport_login_rule.go",
        "resource_teleport_oidc_connector.go",
        "resource_teleport_okta_import_rule.go",
        "resource_teleport_provision_token.go",
        "resource_teleport_role.go",
        "resource_teleport_saml_connector.go",
        "resource_teleport_server.go",
        "resource_teleport_session_recording_config.go",
        "resource_teleport_static_host_user.go",
        "resource_teleport_trusted_cluster.go",
        "resource_teleport_user.go",
        "resource_teleport_workload_identity.go",
    ],
    importpath = "github.com/gravitational/teleport/integrations/terraform/provider",
    visibility = ["//visibility:public"],
    deps = [
        "//api/client",
        "//api/constants",
        "//api/defaults",
        "//api/gen/proto/go/teleport/accesslist/v1:accesslist",
        "//api/gen/proto/go/teleport/accessmonitoringrules/v1:accessmonitoringrules",
        "//api/gen/proto/go/teleport/autoupdate/v1:autoupdate",
        "//api/gen/proto/go/teleport/header/v1:header",
        "//api/gen/proto/go/teleport/healthcheckconfig/v1:healthcheckconfig",
        "//api/gen/proto/go/teleport/loginrule/v1:loginrule",
        "//api/gen/proto/go/teleport/machineid/v1:machineid",
        "//api/gen/proto/go/teleport/userprovisioning/v2:userprovisioning",
        "//api/gen/proto/go/teleport/workloadidentity/v1:workloadidentity",
        "//api/types",
        "//api/types/accesslist/convert/v1:convert",
        "//api/utils",
        "//integrations/lib/backoff",
        "//integrations/lib/embeddedtbot",
        "//integrations/terraform/tfschema",
        "//integrations/terraform/tfschema/accesslist/v1:accesslist",
        "//integrations/terraform/tfschema/accessmonitoringrules/v1:accessmonitoringrules",
        "//integrations/terraform/tfschema/autoupdate/v1:autoupdate",
        "//integrations/terraform/tfschema/devicetrust/v1:devicetrust",
        "//integrations/terraform/tfschema/healthcheckconfig/v1:healthcheckconfig",
        "//integrations/terraform/tfschema/loginrule/v1:loginrule",
        "//integrations/terraform/tfschema/userprovisioning/v2:userprovisioning",
        "//integrations/terraform/tfschema/workloadidentity/v1:workloadidentity",
        "//lib/tbot/config",
        "//lib/utils",
        "//lib/utils/log",
        "@com_github_google_uuid//:uuid",
        "@com_github_gravitational_trace//:trace",
        "@com_github_hashicorp_terraform_plugin_framework//diag:go_default_library",
        "@com_github_hashicorp_terraform_plugin_framework//path:go_default_library",
        "@com_github_hashicorp_terraform_plugin_framework//tfsdk:go_default_library",
        "@com_github_hashicorp_terraform_plugin_framework//types:go_default_library",
        "@com_github_hashicorp_terraform_plugin_log//tflog:go_default_library",
        "@com_github_jonboulle_clockwork//:clockwork",
        "@org_golang_google_grpc//:grpc",
        "@org_golang_google_grpc//grpclog",
    ],
)

go_test(
    name = "provider_test",
    srcs = ["credentials_test.go"],
    embed = [":provider"],
    deps = [
        "//api/client",
        "@com_github_gravitational_trace//:trace",
        "@com_github_stretchr_testify//require",
    ],
)
